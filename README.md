# Sankakuyama-Metamorphosis
Sankakuyama Metamorphosis is a web-based digital twin viewer for the wooden puzzle "Sankakuyama" (a 3D tetrahedron) and its "7x8 Hex" 2D counterpart.
This project visualizes the mathematical continuity between these two geometries. 14 unique puzzle pieces, comprised of 56 total chamfered cube elements, travel through the air, rotating and transforming as they transition from a flat 2D tray to a complex 3D pyramid.

Live Demo
https://sankakuyama-puzzle.github.io/Sankakuyama-Metamorphosis/

Features
Digital Twin Animation: Sequential assembly and disassembly based on precise solution data generated by Python solvers (2D v1.6 / 3D v1.0).
Metamorphosis Visualization: Seamlessly bridges the gap between 2D Hex and 3D FCC (Face-Centered Cubic) lattice structures through dynamic mid-air transitions.
"Clumsy" Comic Effect: A 5% chance of a "clumsy" animation where a piece overshoots the target, falls outside the base, and shatters into 4 pieces before rushing back to its destination.
Technical Illustration Style: Clear and vibrant rendering with emphasized black edges and flat shading to highlight the puzzle's internal structure.
Cross-Platform: Designed to run on all major modern browsers (Safari, Chrome, Firefox, Edge) on PC, Mac, tablets, and smartphones.

Controls
S Key: Cycle through movement speeds (Normal / Slow / Super Slow).
Mouse Drag: Rotate view (360 degrees).
Mouse Wheel / Pinch: Zoom in and out.
Wait Duration: 10-second pauses between completed states to allow for appreciation of the geometry.

Technical Specifications
Engine: p5.js (JavaScript)
Rendering Mode: WEBGL with Orthographic Projection.
Data Handling: Uses JavaScript BigInt to accurately process massive 56-bit solution masks without precision loss.
Geometry: Accurate implementation of Face-Centered Cubic (FCC) lattice coordinates for the 3D model and axial coordinates for the 2D Hex grid.

Project Structure
index.html: UI layout and high-impact title display.
sketch.js: Core rendering engine, animation logic, and chamfered cube generation.
solutions.json: Unified database containing multiple 2D and 3D solution sets.
generate_json.py: A Python utility script to aggregate raw text solution files into the JSON database.

Background
This project was born from a collaborative AI development effort to solve and visualize physical wooden puzzles. By proving that the difficult 3D stacking of "Sankakuyama" and the 2D expansion of a Hex grid share the same "56-cell" logic, we have created an interactive experience that makes complex spatial mathematics accessible and fun to watch.
Visit https://note.com/sankakuyama

The Award-Winning Physical Puzzle: Sankakuyama
The digital experience in this repository is a tribute to the physical Sankakuyama Puzzle, a masterfully crafted wooden 3D puzzle from Japan.
Good Toy 2024 Award: Sankakuyama was honored with the prestigious Good Toy 2024 award, recognizing its excellence in design, playability, and artistic value.
Physical Experience: While this viewer visualizes the mathematical "Metamorphosis," nothing beats the tactile warmth and satisfying "click" of the real wooden pieces forming a tetrahedron.
How to Get One: The physical puzzle is available for order at the Tokyo Toy Museum (Museum Shop). It is highly recommended for puzzle enthusiasts and collectors who appreciate fine Japanese craftsmanship.

License
This project is licensed under the MIT License.
Author
Koji Ohashi
